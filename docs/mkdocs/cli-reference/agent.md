# Agent Commands

The `agent` command group contains all commands related to managing agent runtimes, including creation, updates, invocation, and deletion.

## Overview

Agent commands provide complete lifecycle management for your agents on Amazon Bedrock AgentCore Runtime. Each agent represents a containerized AI application that can be deployed, versioned, and invoked through endpoints.

<div class="grid cards" markdown>

- <i data-feather="plus-circle" style="color: var(--md-primary-fg-color);"></i> **create**

    Create and deploy a new agent runtime.

- <i data-feather="refresh-cw" style="color: var(--md-primary-fg-color);"></i> **update**

    Update an existing agent with a new version.

- <i data-feather="play" style="color: var(--md-primary-fg-color);"></i> **invoke**

    Invoke an agent runtime with a prompt or payload.

- <i data-feather="list" style="color: var(--md-primary-fg-color);"></i> **list**

    List all deployed agent runtimes.

- <i data-feather="info" style="color: var(--md-primary-fg-color);"></i> **status**

    Show detailed status of an agent runtime.

- <i data-feather="trash-2" style="color: var(--md-primary-fg-color);"></i> **delete**

    Delete an agent runtime and associated resources.

</div>

## agent create

Create and deploy a new agent runtime.

```bash
agentcore-cli agent create <name> [options]
```

### Arguments

<div class="option-table" markdown>
| Argument | Description |
| -------- | ----------- |
| `name` | The name of the agent to create (required) |
</div>

### Options

<div class="option-table" markdown>
| Option | Description |
| ------ | ----------- |
| `--dockerfile PATH` | Path to the Dockerfile (default: `Dockerfile`) |
| `--context PATH` | Docker build context (default: current directory) |
| `--build-args KEY=VALUE` | Build arguments for Docker build (can be used multiple times) |
| `--image-tag TAG` | Tag for the container image (default: `latest`) |
| `--environment ENV` | Environment to deploy to (default: current environment) |
| `--region REGION` | AWS region for deployment |
| `--no-deploy` | Build the container but don't deploy the agent runtime |
| `--role-prefix PREFIX` | IAM role name prefix (default: `agentcore`) |
| `--memory MB` | Memory allocation in MB (default: `2048`) |
| `--timeout SEC` | Function timeout in seconds (default: `900`) |
| `--concurrency NUM` | Maximum concurrent executions (default: `10`) |
| `--environment-vars KEY=VALUE` | Environment variables for the agent (can be used multiple times) |
</div>

### Examples

=== "Basic Creation"

    ```bash
    # Create an agent with default settings
    agentcore-cli agent create my-agent
    ```

=== "Custom Dockerfile"

    ```bash
    # Create an agent with a custom Dockerfile
    agentcore-cli agent create my-agent --dockerfile ./path/to/Dockerfile
    ```

=== "Build Arguments"

    ```bash
    # Create an agent with build arguments
    agentcore-cli agent create my-agent \
      --build-args API_KEY=secret123 \
      --build-args DEBUG=true
    ```

=== "Environment Variables"

    ```bash
    # Create an agent with environment variables
    agentcore-cli agent create my-agent \
      --environment-vars MODEL=anthropic.claude-3-sonnet-20240229-v1:0 \
      --environment-vars MAX_TOKENS=4096
    ```

=== "Production Deployment"

    ```bash
    # Create an agent in production environment
    agentcore-cli agent create my-agent \
      --environment prod \
      --memory 4096 \
      --timeout 1800 \
      --concurrency 25
    ```

=== "Build Only"

    ```bash
    # Build the container without deploying
    agentcore-cli agent create my-agent --no-deploy
    ```

## agent update

Update an existing agent with a new version.

```bash
agentcore-cli agent update <name> [options]
```

### Arguments

<div class="option-table" markdown>
| Argument | Description |
| -------- | ----------- |
| `name` | The name of the agent to update (required) |
</div>

### Options

<div class="option-table" markdown>
| Option | Description |
| ------ | ----------- |
| `--dockerfile PATH` | Path to the Dockerfile (default: `Dockerfile`) |
| `--context PATH` | Docker build context (default: current directory) |
| `--build-args KEY=VALUE` | Build arguments for Docker build (can be used multiple times) |
| `--image-tag TAG` | Tag for the container image (default: autogenerated) |
| `--environment ENV` | Environment to deploy to (default: current environment) |
| `--region REGION` | AWS region for deployment |
| `--no-deploy` | Build the container but don't deploy the agent runtime |
| `--endpoint NAME` | Endpoint to update (default: `DEFAULT`) |
| `--memory MB` | Memory allocation in MB |
| `--timeout SEC` | Function timeout in seconds |
| `--concurrency NUM` | Maximum concurrent executions |
| `--environment-vars KEY=VALUE` | Environment variables for the agent (can be used multiple times) |
</div>

### Examples

=== "Basic Update"

    ```bash
    # Update an agent with a new version
    agentcore-cli agent update my-agent
    ```

=== "Update with Custom Tag"

    ```bash
    # Update an agent with a specific tag
    agentcore-cli agent update my-agent --image-tag v2.0.0
    ```

=== "Update Configuration"

    ```bash
    # Update an agent's configuration
    agentcore-cli agent update my-agent \
      --memory 4096 \
      --timeout 1800
    ```

=== "Update Endpoint"

    ```bash
    # Update a specific endpoint
    agentcore-cli agent update my-agent \
      --endpoint production \
      --image-tag stable-v1
    ```

## agent invoke

Invoke an agent runtime with a prompt or payload.

```bash
agentcore-cli agent invoke <name> [options]
```

### Arguments

<div class="option-table" markdown>
| Argument | Description |
| -------- | ----------- |
| `name` | The name of the agent to invoke (required) |
</div>

### Options

<div class="option-table" markdown>
| Option | Description |
| ------ | ----------- |
| `--prompt TEXT` | Text prompt to send to the agent |
| `--file PATH` | Path to a file containing the prompt |
| `--payload JSON` | Raw JSON payload to send to the agent |
| `--payload-file PATH` | Path to a JSON file containing the payload |
| `--endpoint NAME` | Endpoint to invoke (default: `DEFAULT`) |
| `--environment ENV` | Environment to use (default: current environment) |
| `--output FILE` | Save the response to a file |
| `--raw` | Output raw response without formatting |
| `--timeout SEC` | Request timeout in seconds (default: `30`) |
</div>

### Examples

=== "Text Prompt"

    ```bash
    # Invoke an agent with a text prompt
    agentcore-cli agent invoke my-agent \
      --prompt "Tell me about AWS Bedrock"
    ```

=== "From File"

    ```bash
    # Invoke an agent with a prompt from a file
    agentcore-cli agent invoke my-agent \
      --file ./prompt.txt
    ```

=== "Custom JSON Payload"

    ```bash
    # Invoke an agent with a custom JSON payload
    agentcore-cli agent invoke my-agent \
      --payload '{"query": "What is AWS Bedrock?", "max_tokens": 500}'
    ```

=== "Save Output"

    ```bash
    # Save the agent's response to a file
    agentcore-cli agent invoke my-agent \
      --prompt "Generate a report" \
      --output ./report.txt
    ```

=== "Specific Endpoint"

    ```bash
    # Invoke a specific endpoint
    agentcore-cli agent invoke my-agent \
      --prompt "Hello" \
      --endpoint production
    ```

## agent list

List all deployed agent runtimes.

```bash
agentcore-cli agent list [options]
```

### Options

<div class="option-table" markdown>
| Option | Description |
| ------ | ----------- |
| `--environment ENV` | Environment to list agents from (default: current environment) |
| `--region REGION` | AWS region to list agents from |
| `--verbose`, `-v` | Show detailed information for each agent |
</div>

### Examples

```bash
# List all agents in the current environment
agentcore-cli agent list

# List all agents in production with details
agentcore-cli agent list --environment prod --verbose
```

## agent status

Show detailed status of an agent runtime.

```bash
agentcore-cli agent status <name> [options]
```

### Arguments

<div class="option-table" markdown>
| Argument | Description |
| -------- | ----------- |
| `name` | The name of the agent to show status for (required) |
</div>

### Options

<div class="option-table" markdown>
| Option | Description |
| ------ | ----------- |
| `--environment ENV` | Environment to use (default: current environment) |
| `--region REGION` | AWS region to use |
</div>

### Examples

```bash
# Show status of an agent
agentcore-cli agent status my-agent

# Show status in a specific environment
agentcore-cli agent status my-agent --environment prod
```

## agent delete

Delete an agent runtime and associated resources.

```bash
agentcore-cli agent delete <name> [options]
```

### Arguments

<div class="option-table" markdown>
| Argument | Description |
| -------- | ----------- |
| `name` | The name of the agent to delete (required) |
</div>

### Options

<div class="option-table" markdown>
| Option | Description |
| ------ | ----------- |
| `--environment ENV` | Environment to delete from (default: current environment) |
| `--region REGION` | AWS region to delete from |
| `--force` | Skip confirmation prompt |
| `--keep-ecr` | Keep the ECR repository and images |
| `--keep-iam` | Keep the IAM role |
</div>

### Examples

=== "Basic Deletion"

    ```bash
    # Delete an agent (with confirmation)
    agentcore-cli agent delete my-agent
    ```

=== "Force Delete"

    ```bash
    # Force delete without confirmation
    agentcore-cli agent delete my-agent --force
    ```

=== "Keep Resources"

    ```bash
    # Delete agent but keep ECR repository
    agentcore-cli agent delete my-agent --keep-ecr
    ```

## Next Steps

Now that you understand the agent commands, you might want to explore:

- [Environment Commands](env.md) to manage your environments
- [Container Commands](container.md) to work directly with Docker containers
- [Configuration Commands](config.md) to manage your AgentCore configuration
